

#Область ПрограммныйИнтерфейс
// Функция проверяет наличие у ссылки дочерних элементов.
// Параметры:
//  Ссылка - ЛюбаяСсылка - ссылка на объект справочника.
// Возвращаемое значение:
//  Булево - Истина, если есть подчиненные элементы, Ложь - если нет или объект не иерархический.
Функция ЕстьЭлементыНижнегоУровня(Ссылка) Экспорт
    
    // Проверка на пустую ссылку
    Если Не ЗначениеЗаполнено(Ссылка) Тогда
        Возврат Истина;
    КонецЕсли;
    
    // Получение метаданных объекта
    МетаданныеОбъекта = Ссылка.Метаданные();
    
    // Проверка, что объект является справочником и иерархическим
    Если Не Метаданные.Справочники.Содержит(МетаданныеОбъекта)
        Или Не МетаданныеОбъекта.Иерархический Тогда
        Возврат Истина; // Не справочник или не иерархический - считаем, что нет дочерних
    КонецЕсли;
    
    // Формирование имени таблицы справочника
    ИмяТаблицы = МетаданныеОбъекта.ПолноеИмя();
    
    // Формирование запроса
    Запрос = Новый Запрос;
    Запрос.Текст =
    "ВЫБРАТЬ ПЕРВЫЕ 1
    |	Ссылка
    |ИЗ
    |	" + ИмяТаблицы + " КАК Таблица
    |ГДЕ
    |	Таблица.Родитель = &Ссылка
    |	И НЕ Таблица.ПометкаУдаления";
    
    Запрос.УстановитьПараметр("Ссылка", Ссылка);
    
    // Выполнение запроса
    Результат = Запрос.Выполнить();
    
    // Если результат пустой, дочерних элементов нет
    Возврат НЕ Результат.Пустой();
    
КонецФункции
#КонецОбласти
